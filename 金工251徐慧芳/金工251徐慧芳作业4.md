1.<!-- 题目要:包的简介：data.table是⼀个什么包，⼀般⽤来做什么？和第三次作业中最后⼀题所讲到的那个数据结
构有什么区别和联系？可以⽤什么函数将那个数据结构与data.table格式进⾏转换？请利⽤mtcars这
个数据集进⾏实际操作。 -->\
<!-- 答案：data.table是R语言中一个高效处理表格型数据的扩展包，一般用来做快速的数据筛选、分组统计、修改列等数据处理任务
  data.table是data.frame的扩展，继承了data.frame的大部分特性，能兼容data.frame的操作
  data.table有更简洁的语法（[i,j,by]）、更快的运算速度、支持分组操作的优化等-->\
library(data.table) <!--导入data.table包-->\
dt\<-as.data.table(mtcars) <!--data.frame转data.table-->\
df\<-as.data.frame(dt) <!--data.table转data.frame-->\
2.<!--题目：数据的导入和导出问题：data.table⽤以读取外部数据的函数是哪⼀个？可以⽤来读取什么格式的数据？将data.table格式保存到外部的函数是哪⼀个？请利⽤mtcars这个数据集进⾏实际操作。-->\
<!--答案：读取外部数据的函数：fread()，可以读取CSV、TSV、文本文件等格式,保存data.table的函数  
  fwrite()--> fread\<-fread("mtcars.csv") <!--读取-->\
fwrite(dt,"mtcars.csv") <!--保存-->\
3.<!--题目:基本语法：data.table的基本语法[i, j, by]当中，i、j、by分别表⽰什么含义？他们都分别可以进⾏什么操作？三者同时存在时运⾏的顺序是什么？请利⽤mtcars这个数据集进⾏实际操作。-->\
<!--答案：i：表示行的筛选,排序,合并
  j：表示列的操作，比如选择列、计算新列等。
  by：表示分组依据，按照某个/某些变量分组。
  运行顺序：先执行i（行筛选）→ 再执行by（分组）→ 最后执行j（列操作）-->\
dt[i=disp \> 200, j=sum(hp), by = cyl] <!--i筛选+by分组+j计算：筛选disp>200的行，按cyl分组，计算hp的和-->\
cyl V1 <num> <num> 1: 6 215 2: 8 2929\
4.<!--题目:变量引⽤：如果要在data.table中要对某个变量进⾏操作，如何引⽤这个变量？请利⽤mtcars这个数据集，对其中任意两个变量进⾏引⽤，并对⼆者做加法，给出代码。-->\
dt[,mpg+disp] <!--引用mpg和disp变量并做加法-->\
[1] 181.0 181.0 130.8 279.4 378.7 243.1 374.3 171.1 163.6 186.8 185.4 292.2 293.1 291.0 482.4 470.4 [17] 454.7 111.1 106.1 105.0 141.6 333.5 319.2 363.3 419.2 106.3 146.3 125.5 366.8 164.7 316.0 142.4\
5.<!--题目：数据筛选I：data.table中如何进⾏⾏筛选？进⾏⾏筛选⼀般需要在i中给定的数据格式是什么（精确到向量的基本格式）？如何进⾏列筛选？data.frame格式的列筛选的语法如何？data.frame当中的列筛选⽅式能不能⽤在data.table当中？请利⽤mtcars这个数据集进⾏实际操作。-->\
<!--答案data.table的筛选格式：DT[行条件, 列选择]，行筛选的向量格式是逻辑向量如c(TRUE, FALSE)data.frame列筛选语法：df$列名或df[, "列名"]，但data.frame的列筛选方式不能直接用在data.table（需用DT[, 列名]）-->\
dt[cyl==6] <!--筛选cyl=6的行-->\
mpg cyl disp hp drat wt qsec vs am gear carb\
<num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num>\
1: 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4\
2: 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4\
3: 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1\
4: 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1\
5: 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4\
6: 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4\
7: 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6\
dt[, mpg] <!--选择mpg列（data.table方式）-->\
[1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4 10.4 14.7 32.4 30.4\
[20] 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7 15.0 21.4\
6.<!--题目：数据筛选II：data.table当中，如果要将数据表中的某个变量（某列） 进⾏选取，最终选择出来的这⼀列变量还是⼀个data.table，应该⽤什么⽅式？最终如果选择出这⼀列变量，并⽣成⼀个向量，应该⽤哪种⽅式（只⽤⼀⾏操作）？请利⽤mtcars这个数据集进⾏实际操作。-->\
<!--答案保持为data.table：DT[, .(列名)]（用.()包裹列名)生成向量：DT[, 列名]（直接写列名）-->\
dt[, .(mpg)] <!--选择mpg列，结果是data.table-->\
mpg <num>\
1: 21.0\
2: 21.0\
3: 22.8\
4: 21.4\
5: 18.7\
6: 18.1\
7: 14.3\
8: 24.4\
9: 22.8\
10: 19.2\
11: 17.8\
12: 16.4\
13: 17.3\
14: 15.2\
15: 10.4 16: 10.4 17: 14.7 18: 32.4 19: 30.4 20: 33.9 21: 21.5 22: 15.5 23: 15.2 24: 13.3 25: 19.2 26: 27.3 27: 26.0 28: 30.4 29: 15.8 30: 19.7 31: 15.0 32: 21.4 mpg\
dt[, mpg] <!--选择mpg列，结果是向量-->\
[1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4 10.4 14.7 32.4 30.4\
[20] 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7 15.0 21.4\
7.<!--题目：排序：data.table中，同时根据多个变量进⾏排序怎么做？如何进⾏升序和降序排列？在基本语法[i,j, by]三个部分当中哪些部分可以直接进⾏排序操作？在i中操作可不可以同时进⾏筛选和排序操作？
请利⽤mtcars这个数据集进⾏实例操作。-->\
<!--答案:多变量排序：DT[order(变量1, 变量2)]；升序（默认）/降序（加-）
  排序操作位置：在[i]部分（行筛选区域）
  同时筛选+排序：可以在[i]同时写筛选和排序-->\
dt[order(mpg, -disp)] <!--按mpg升序、disp降序排序-->\
mpg cyl disp hp drat wt qsec vs am gear carb\
<num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num>\
1: 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4\
2: 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4\
3: 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4\
4: 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4\
5: 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4\
6: 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8\
7: 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 8: 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 9: 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 10: 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 11: 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 12: 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 13: 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 14: 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 15: 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 16: 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 17: 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 18: 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 19: 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 20: 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 21: 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 22: 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 23: 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 24: 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 25: 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 26: 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 27: 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 28: 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 29: 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 30: 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 31: 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 32: 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 mpg cyl disp hp drat wt qsec vs am gear carb\
dt[cyl == 6][order(mpg)] <!--先筛选cyl=6，再按mpg排序-->\
mpg cyl disp hp drat wt qsec vs am gear carb\
<num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num>\
1: 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4\
2: 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1\
3: 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4\
4: 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6\
5: 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4\
6: 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4\
7: 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1\
8.<!--题目：添加或更改列数据：data.table当中，添加或更改⼀列数据，需要⽤到什么函数？如果需要同时添加多列数据需要怎么做（请在⼀⾏代码中实现）？请利⽤mtcars这个数据集进⾏实际操作，添加或更改任意列的数据。-->\
<!--答案:用DT[, 新列名 := 赋值]（:=是data.table的列操作函数）dt <- as.data.table(mtcars)-->\
dt[, new_col := mpg + disp] <!--添加新列new_col-->\
mpg cyl disp hp drat wt qsec vs am gear carb new_col\
<num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num>\
1: 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 181.0\
2: 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 181.0\
3: 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 130.8\
4: 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 279.4\
5: 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 378.7\
6: 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 243.1\
7: 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 374.3 8: 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 171.1 9: 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 163.6 10: 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 186.8 11: 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 185.4 12: 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 292.2 13: 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 293.1 14: 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 291.0 15: 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 482.4 16: 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 470.4 17: 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 454.7 18: 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 111.1 19: 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 106.1 20: 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 105.0 21: 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 141.6 22: 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 333.5 23: 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 319.2 24: 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 363.3 25: 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 419.2 26: 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 106.3 27: 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 146.3 28: 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 125.5 29: 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 366.8 30: 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 164.7 31: 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 316.0 32: 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 142.4 mpg cyl disp hp drat wt qsec vs am gear carb new_col\
dt[, mpg := mpg \* 2] <!--更改mpg列（将mpg值翻倍）-->\
[1] 42.0 42.0 45.6 42.8 37.4 36.2 28.6 48.8 45.6 38.4 35.6 32.8 34.6 30.4 20.8 20.8 29.4 64.8 60.8\
[20] 67.8 43.0 31.0 30.4 26.6 38.4 54.6 52.0 60.8 31.6 39.4 30.0 42.8\
dt[,:=.(new_col1=mpg*3,new_col2=mpg*4)] <!--同时添加两列数据-->\
new_col1 new_col2\
<num> <num>\
1: 126.0 168.0\
2: 126.0 168.0\
3: 136.8 182.4\
4: 128.4 171.2\
5: 112.2 149.6\
6: 108.6 144.8\
7: 85.8 114.4 8: 146.4 195.2 9: 136.8 182.4 10: 115.2 153.6 11: 106.8 142.4 12: 98.4 131.2 13: 103.8 138.4 14: 91.2 121.6 15: 62.4 83.2 16: 62.4 83.2 17: 88.2 117.6 18: 194.4 259.2 19: 182.4 243.2 20: 203.4 271.2 21: 129.0 172.0 22: 93.0 124.0 23: 91.2 121.6 24: 79.8 106.4 25: 115.2 153.6 26: 163.8 218.4 27: 156.0 208.0 28: 182.4 243.2 29: 94.8 126.4 30: 118.2 157.6 31: 90.0 120.0 32: 128.4 171.2 new_col1 new_col2\
9.<!--题目：分组I：什么是分组操作？by与keyby有什么区别？data.table中如何进⾏依据多个变量进⾏分组后的组内求和操作？请请利⽤mtcars这个数据集，并结合上⼀题的⽅式，进⾏该操作⽰例。-->\
<!--答案:分组操作：按一个/多个变量将数据拆分，对每组进行计算
  by与keyby的区别：by按分组变量原顺序输出；keyby会按分组变量排序后输出
  多变量分组求和：DT[, .(求和列=sum(变量)), by=.(分组变量1, 分组变量2)]-->\
dt[, sum_mpg := sum(mpg),by = .(cyl, gear)] <!--按cyl、gear分组，对mpg求和，并添加新列sum_mpg-->\
mpg cyl disp hp drat wt qsec vs am gear carb new_col new_col1 new_col2\
<num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num>\
1: 42.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 181.0 126.0 168.0\
2: 42.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 181.0 126.0 168.0\
3: 45.6 4 108.0 93 3.85 2.320 18.61 1 1 4 1 130.8 136.8 182.4\
4: 42.8 6 258.0 110 3.08 3.215 19.44 1 0 3 1 279.4 128.4 171.2 5: 37.4 8 360.0 175 3.15 3.440 17.02 0 0 3 2 378.7 112.2 149.6 6: 36.2 6 225.0 105 2.76 3.460 20.22 1 0 3 1 243.1 108.6 144.8 7: 28.6 8 360.0 245 3.21 3.570 15.84 0 0 3 4 374.3 85.8 114.4 8: 48.8 4 146.7 62 3.69 3.190 20.00 1 0 4 2 171.1 146.4 195.2 9: 45.6 4 140.8 95 3.92 3.150 22.90 1 0 4 2 163.6 136.8 182.4 10: 38.4 6 167.6 123 3.92 3.440 18.30 1 0 4 4 186.8 115.2 153.6 11: 35.6 6 167.6 123 3.92 3.440 18.90 1 0 4 4 185.4 106.8 142.4 12: 32.8 8 275.8 180 3.07 4.070 17.40 0 0 3 3 292.2 98.4 131.2 13: 34.6 8 275.8 180 3.07 3.730 17.60 0 0 3 3 293.1 103.8 138.4 14: 30.4 8 275.8 180 3.07 3.780 18.00 0 0 3 3 291.0 91.2 121.6 15: 20.8 8 472.0 205 2.93 5.250 17.98 0 0 3 4 482.4 62.4 83.2 16: 20.8 8 460.0 215 3.00 5.424 17.82 0 0 3 4 470.4 62.4 83.2 17: 29.4 8 440.0 230 3.23 5.345 17.42 0 0 3 4 454.7 88.2 117.6 18: 64.8 4 78.7 66 4.08 2.200 19.47 1 1 4 1 111.1 194.4 259.2 19: 60.8 4 75.7 52 4.93 1.615 18.52 1 1 4 2 106.1 182.4 243.2 20: 67.8 4 71.1 65 4.22 1.835 19.90 1 1 4 1 105.0 203.4 271.2 21: 43.0 4 120.1 97 3.70 2.465 20.01 1 0 3 1 141.6 129.0 172.0 22: 31.0 8 318.0 150 2.76 3.520 16.87 0 0 3 2 333.5 93.0 124.0 23: 30.4 8 304.0 150 3.15 3.435 17.30 0 0 3 2 319.2 91.2 121.6 24: 26.6 8 350.0 245 3.73 3.840 15.41 0 0 3 4 363.3 79.8 106.4 25: 38.4 8 400.0 175 3.08 3.845 17.05 0 0 3 2 419.2 115.2 153.6 26: 54.6 4 79.0 66 4.08 1.935 18.90 1 1 4 1 106.3 163.8 218.4 27: 52.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 146.3 156.0 208.0 28: 60.8 4 95.1 113 3.77 1.513 16.90 1 1 5 2 125.5 182.4 243.2 29: 31.6 8 351.0 264 4.22 3.170 14.50 0 1 5 4 366.8 94.8 126.4 30: 39.4 6 145.0 175 3.62 2.770 15.50 0 1 5 6 164.7 118.2 157.6 31: 30.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 316.0 90.0 120.0 32: 42.8 4 121.0 109 4.11 2.780 18.60 1 1 4 2 142.4 128.4 171.2 mpg cyl disp hp drat wt qsec vs am gear carb new_col new_col1 new_col2 sum_mpg <num> 1: 158.0 2: 158.0 3: 430.8 4: 79.0 5: 361.2 6: 79.0 7: 361.2 8: 430.8 9: 430.8 10: 158.0 11: 158.0 12: 361.2 13: 361.2 14: 361.2 15: 361.2 16: 361.2 17: 361.2 18: 430.8 19: 430.8 20: 430.8 21: 43.0 22: 361.2 23: 361.2 24: 361.2 25: 361.2 26: 430.8 27: 112.8 28: 112.8 29: 61.6 30: 39.4 31: 61.6 32: 430.8 sum_mpg\
10.<!--题目：分组II：在by中如何将分组和筛选进⾏组合操作？请请利⽤mtcars这个数据集，并结合上⼀题的⽅式，进⾏操作⽰例。-->\
<!--答案：方法1：先筛选行，再分组；-->\
dt[hp \> 100, .(mpg_mean = mean(mpg)), by = .(cyl)]\
cyl mpg_mean\
<num> <num>\
1: 6 19.74286\
2: 8 15.10000\
3: 4 25.90000\
<!--答案:方法2：分组后，在j中筛选组内数据-->\
dt[, .(mpg_mean = mean(mpg[disp \> 200])), by = .(cyl)]\
cyl mpg_mean\
<num> <num>\
1: 6 19.75\
2: 4 NaN\
3: 8 15.10\
11.<!--题目：特殊函数I：.SD在data.table中表⽰什么？使⽤后会⽣成⼀个什么数据结构？经过分组操作以后⽣成的结构是怎样的？请利⽤mtcars这个数据集进⾏实例操作。-->\
<!--答案:SD表示每个分组内的子数据集（Subset of Data），是一个data.table结构。分组后，每个组对应的.SD是该组的所有行+列-->\
dt[, print(.SD), by = .(cyl)] \# 查看每组的.SD（以cyl分组）\
mpg disp hp drat wt qsec vs am gear carb\
<num> <num> <num> <num> <num> <num> <num> <num> <num> <num>\
1: 21.0 160.0 110 3.90 2.620 16.46 0 1 4 4\
2: 21.0 160.0 110 3.90 2.875 17.02 0 1 4 4\
3: 21.4 258.0 110 3.08 3.215 19.44 1 0 3 1\
4: 18.1 225.0 105 2.76 3.460 20.22 1 0 3 1\
5: 19.2 167.6 123 3.92 3.440 18.30 1 0 4 4\
6: 17.8 167.6 123 3.92 3.440 18.90 1 0 4 4\
7: 19.7 145.0 175 3.62 2.770 15.50 0 1 5 6\
mpg disp hp drat wt qsec vs am gear carb\
<num> <num> <num> <num> <num> <num> <num> <num> <num> <num>\
1: 22.8 108.0 93 3.85 2.320 18.61 1 1 4 1\
2: 24.4 146.7 62 3.69 3.190 20.00 1 0 4 2\
3: 22.8 140.8 95 3.92 3.150 22.90 1 0 4 2\
4: 32.4 78.7 66 4.08 2.200 19.47 1 1 4 1\
5: 30.4 75.7 52 4.93 1.615 18.52 1 1 4 2\
6: 33.9 71.1 65 4.22 1.835 19.90 1 1 4 1\
7: 21.5 120.1 97 3.70 2.465 20.01 1 0 3 1\
8: 27.3 79.0 66 4.08 1.935 18.90 1 1 4 1\
9: 26.0 120.3 91 4.43 2.140 16.70 0 1 5 2 10: 30.4 95.1 113 3.77 1.513 16.90 1 1 5 2 11: 21.4 121.0 109 4.11 2.780 18.60 1 1 4 2 mpg disp hp drat wt qsec vs am gear carb <num> <num> <num> <num> <num> <num> <num> <num> <num> <num> 1: 18.7 360.0 175 3.15 3.440 17.02 0 0 3 2 2: 14.3 360.0 245 3.21 3.570 15.84 0 0 3 4 3: 16.4 275.8 180 3.07 4.070 17.40 0 0 3 3 4: 17.3 275.8 180 3.07 3.730 17.60 0 0 3 3 5: 15.2 275.8 180 3.07 3.780 18.00 0 0 3 3 6: 10.4 472.0 205 2.93 5.250 17.98 0 0 3 4 7: 10.4 460.0 215 3.00 5.424 17.82 0 0 3 4 8: 14.7 440.0 230 3.23 5.345 17.42 0 0 3 4 9: 15.5 318.0 150 2.76 3.520 16.87 0 0 3 2 10: 15.2 304.0 150 3.15 3.435 17.30 0 0 3 2 11: 13.3 350.0 245 3.73 3.840 15.41 0 0 3 4 12: 19.2 400.0 175 3.08 3.845 17.05 0 0 3 2 13: 15.8 351.0 264 4.22 3.170 14.50 0 1 5 4 14: 15.0 301.0 335 3.54 3.570 14.60 0 1 5 8 Empty data.table (0 rows and 1 cols): cyl\
12.<!--题目：特殊函数II：.N在data.table当中表⽰什么？使⽤后会⽣成⼀个什么数据结构？经过分组操作以后⽣成的结构是怎样的？请利⽤mtcars这个数据集进⾏实例操作。-->\
<!--答案：.N表示当前分组内的行数，是一个数值分组后，.N是每组的样本量；不分组时，.N是整个数据集的行数-->\
dt[, .(group_size = .N), by = .(cyl)] <!--分组后，每组的行数-->\
cyl group_size\
<num> <int>\
1: 6 7\
2: 4 11\
3: 8 14\
dt[, .N] <!--整个数据集的行数（不分组）-->\
[1] 32\
13.<!--题目：特殊函数III：data.table当中的chaining是⼀种什么操作？⼀般⽤在什么时候？如果我想针对mtcars中的数据先筛选出vs和am都为1的观测，然后再分别计算另外两个变量mpg和cyl的平均值，并⽣成mpg_aver和cyl_aver两个变量，请利⽤chaining的⽅式给出代码。-->\
<!--答案：chaining是用[]连续调用操作，将前一步的结果作为后一步的输入，用于简化多步操作的代码，适用于多步数据处理--> dt[vs == 1 & am == 1, ] %\>% <!--筛选行--> .[, .(mpg_aver = mean(mpg), cyl_aver = mean(cyl))] %\>% <!--计算均值--> .[,.(mpg_aver,cyl_aver)] <!--显示变量，结束chaining--> mpg_aver cyl_aver <num> <num> 1: 28.37143 4 14.<!--题目：join操作（横向合并）：如果两张表存在两个相同的共同变量，要进⾏join的合并操作，需要⽤到什么语法？有哪两种操作⽅式？两种操作⽅式存在什么区别？--> <!--答案：data.table中用merge()或DT1[DT2, on = 共同变量]实现横向合并，两种方式：
   内连接（inner join）：只保留两个表都有的共同变量行；
   外连接（outer join）：包含所有行（需指定all.x/all.y）
   区别：内连接取交集，外连接取并集-->\
15.<!--题目：bind操作（竖向合并）：如果两张表要进⾏bind操作并需要⽤到什么函数（请⼀定使⽤data.table当中的函数）？请把mtcars数据集当中的所有数据都+1，⽣成另⼀个数据集，并于原来的数据集进⾏合并。-->\
<!--答案:data.table中用rbindlist()实现竖向合并（需列名一致）-->\
dt_new \<- dt+1 <!--生成新表-->\
rbindlist(list(dt, dt_new)) <!--竖向合并原表和新表-->\
mpg cyl disp hp drat wt qsec vs am gear carb\
<num> <num> <num> <num> <num> <num> <num> <num> <num> <num> <num>\
1: 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4\
2: 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4\
3: 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1\
4: 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1\
5: 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2\
6: 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1\
7: 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4\
8: 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2\
9: 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2\
10: 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4\
11: 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4\
12: 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3\
13: 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3\
14: 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3\
15: 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4\
16: 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 17: 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 18: 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 19: 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 20: 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 21: 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 22: 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 23: 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 24: 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 25: 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 26: 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 27: 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 28: 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 29: 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 30: 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 31: 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 32: 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 33: 22.0 7 161.0 111 4.90 3.620 17.46 1 2 5 5 34: 22.0 7 161.0 111 4.90 3.875 18.02 1 2 5 5 35: 23.8 5 109.0 94 4.85 3.320 19.61 2 2 5 2 36: 22.4 7 259.0 111 4.08 4.215 20.44 2 1 4 2 37: 19.7 9 361.0 176 4.15 4.440 18.02 1 1 4 3 38: 19.1 7 226.0 106 3.76 4.460 21.22 2 1 4 2 39: 15.3 9 361.0 246 4.21 4.570 16.84 1 1 4 5 40: 25.4 5 147.7 63 4.69 4.190 21.00 2 1 5 3 41: 23.8 5 141.8 96 4.92 4.150 23.90 2 1 5 3 42: 20.2 7 168.6 124 4.92 4.440 19.30 2 1 5 5 43: 18.8 7 168.6 124 4.92 4.440 19.90 2 1 5 5 44: 17.4 9 276.8 181 4.07 5.070 18.40 1 1 4 4 45: 18.3 9 276.8 181 4.07 4.730 18.60 1 1 4 4 46: 16.2 9 276.8 181 4.07 4.780 19.00 1 1 4 4 47: 11.4 9 473.0 206 3.93 6.250 18.98 1 1 4 5 48: 11.4 9 461.0 216 4.00 6.424 18.82 1 1 4 5 49: 15.7 9 441.0 231 4.23 6.345 18.42 1 1 4 5 50: 33.4 5 79.7 67 5.08 3.200 20.47 2 2 5 2 51: 31.4 5 76.7 53 5.93 2.615 19.52 2 2 5 3 52: 34.9 5 72.1 66 5.22 2.835 20.90 2 2 5 2 53: 22.5 5 121.1 98 4.70 3.465 21.01 2 1 4 2 54: 16.5 9 319.0 151 3.76 4.520 17.87 1 1 4 3 55: 16.2 9 305.0 151 4.15 4.435 18.30 1 1 4 3 56: 14.3 9 351.0 246 4.73 4.840 16.41 1 1 4 5 57: 20.2 9 401.0 176 4.08 4.845 18.05 1 1 4 3 58: 28.3 5 80.0 67 5.08 2.935 19.90 2 2 5 2 59: 27.0 5 121.3 92 5.43 3.140 17.70 1 2 6 3 60: 31.4 5 96.1 114 4.77 2.513 17.90 2 2 6 3 61: 16.8 9 352.0 265 5.22 4.170 15.50 1 2 6 5 62: 20.7 7 146.0 176 4.62 3.770 16.50 1 2 6 7 63: 16.0 9 302.0 336 4.54 4.570 15.60 1 2 6 9 64: 22.4 5 122.0 110 5.11 3.780 19.60 2 2 5 3 mpg cyl disp hp drat wt qsec vs am gear carb\
16.<!--题目：. melt与cast操作：什么是melt与cast操作？请利⽤mtcars这个数据集进⾏针对任意变量的melt与cast实际操作。-->\
<!--答案:melt：将“宽表”转为“长表”（把多列转为“变量-值”两列）；
   cast：将“长表”转回“宽表”（按变量分组重塑结构）-->\
dt_melt \<- melt(dt, id.vars = "cyl", measure.vars = c("mpg", "disp", "hp"), variable.name = "var", value.name = "val") <!--melt：宽表转长表-->\
cyl var val\
<num> <fctr> <num>\
1: 6 mpg 21.0\
2: 6 mpg 21.0\
3: 4 mpg 22.8\
4: 6 mpg 21.4\
5: 8 mpg 18.7\
6: 6 mpg 18.1\
7: 8 mpg 14.3 8: 4 mpg 24.4 9: 4 mpg 22.8 10: 6 mpg 19.2 11: 6 mpg 17.8 12: 8 mpg 16.4 13: 8 mpg 17.3 14: 8 mpg 15.2 15: 8 mpg 10.4 16: 8 mpg 10.4 17: 8 mpg 14.7 18: 4 mpg 32.4 19: 4 mpg 30.4 20: 4 mpg 33.9 21: 4 mpg 21.5 22: 8 mpg 15.5 23: 8 mpg 15.2 24: 8 mpg 13.3 25: 8 mpg 19.2 26: 4 mpg 27.3 27: 4 mpg 26.0 28: 4 mpg 30.4 29: 8 mpg 15.8 30: 6 mpg 19.7 31: 8 mpg 15.0 32: 4 mpg 21.4 33: 6 disp 160.0 34: 6 disp 160.0 35: 4 disp 108.0 36: 6 disp 258.0 37: 8 disp 360.0 38: 6 disp 225.0 39: 8 disp 360.0 40: 4 disp 146.7 41: 4 disp 140.8 42: 6 disp 167.6 43: 6 disp 167.6 44: 8 disp 275.8 45: 8 disp 275.8 46: 8 disp 275.8 47: 8 disp 472.0 48: 8 disp 460.0 49: 8 disp 440.0 50: 4 disp 78.7 51: 4 disp 75.7 52: 4 disp 71.1 53: 4 disp 120.1 54: 8 disp 318.0 55: 8 disp 304.0 56: 8 disp 350.0 57: 8 disp 400.0 58: 4 disp 79.0 59: 4 disp 120.3 60: 4 disp 95.1 61: 8 disp 351.0 62: 6 disp 145.0 63: 8 disp 301.0 64: 4 disp 121.0 65: 6 hp 110.0 66: 6 hp 110.0 67: 4 hp 93.0 68: 6 hp 110.0 69: 8 hp 175.0 70: 6 hp 105.0 71: 8 hp 245.0 72: 4 hp 62.0 73: 4 hp 95.0 74: 6 hp 123.0 75: 6 hp 123.0 76: 8 hp 180.0 77: 8 hp 180.0 78: 8 hp 180.0 79: 8 hp 205.0 80: 8 hp 215.0 81: 8 hp 230.0 82: 4 hp 66.0 83: 4 hp 52.0 84: 4 hp 65.0 85: 4 hp 97.0 86: 8 hp 150.0 87: 8 hp 150.0 88: 8 hp 245.0 89: 8 hp 175.0 90: 4 hp 66.0 91: 4 hp 91.0 92: 4 hp 113.0 93: 8 hp 264.0 94: 6 hp 175.0 95: 8 hp 335.0 96: 4 hp 109.0 cyl var val\
dcast(dt_melt, cyl \~ var, value.var = "val", fun.aggregate = mean) <!--cast：长表转宽表（按cyl分组，计算每个变量的均值）-->\
Key: <cyl>\
cyl mpg disp hp\
<num> <num> <num> <num>\
1: 4 26.66364 105.1364 82.63636\
2: 6 19.74286 183.3143 122.28571\
3: 8 15.10000 353.1000 209.21429
